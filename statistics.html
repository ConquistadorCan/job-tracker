<!doctype html>
<html lang="en" style="font-size: 18px">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Statistics | JAT</title>

    <link rel="icon" type="image/png" href="assets/favicon.svg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <style type="text/tailwindcss">
      @variant dark (&:where(.dark, .dark *));

      @theme {
        --color-cb-50: #f1f5fd;
        --color-cb-100: #dfe8fa;
        --color-cb-200: #c5d7f8;
        --color-cb-300: #9ebef2;
        --color-cb-400: #709cea;
        --color-cb-500: #4e79e3;
        --color-cb-600: #395cd7;
        --color-cb-700: #3049c4;
        --color-cb-800: #2d3da0;
        --color-cb-900: #29377f;
        --color-cb-950: #1d234e;
        --font-sans: "Inter", ui-sans-serif, system-ui, sans-serif;
      }

      .stat-card {
        @apply flex flex-col items-center justify-center gap-1 bg-white dark:bg-cb-900 rounded-xl px-4 py-4 border border-cb-100 dark:border-cb-800 shadow-sm;
      }
    </style>

    <script>
      (function () {
        const settings = JSON.parse(
          localStorage.getItem("job-tracker-settings") || "{}",
        );
        const theme = settings.theme || "system";
        const prefersDark = window.matchMedia(
          "(prefers-color-scheme: dark)",
        ).matches;
        if (theme === "dark" || (theme === "system" && prefersDark)) {
          document.documentElement.classList.add("dark");
        }
      })();
    </script>
  </head>

  <body
    class="font-sans bg-gradient-to-br from-cb-50 to-cb-100 dark:from-cb-950 dark:to-cb-900 min-h-screen text-cb-950 dark:text-cb-50"
  >
    <div class="max-w-5xl mx-auto px-4 py-4 sm:px-6 sm:py-8">
      <!-- Header -->
      <header
        class="relative flex items-center justify-between mb-6 sm:mb-8 bg-white dark:bg-cb-900 rounded-2xl shadow-sm border border-cb-100 dark:border-cb-800 px-4 py-3 sm:px-6 sm:py-4"
      >
        <button
          id="stats-back-btn"
          class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-cb-600 text-white font-semibold text-sm hover:bg-cb-700 dark:bg-transparent dark:border dark:border-cb-400 dark:text-cb-300 dark:hover:bg-cb-800/60 dark:hover:text-cb-100 transition duration-150 cursor-pointer shadow-sm dark:shadow-none"
        >
          ‚Üê Back
        </button>
        <div class="absolute left-1/2 -translate-x-1/2">
          <h1
            id="stats-title"
            class="font-extrabold text-2xl sm:text-4xl text-cb-700 dark:text-cb-300 tracking-tight"
          >
            Statistics
          </h1>
        </div>
        <div></div>
      </header>

      <!-- Empty state -->
      <div
        id="stats-empty"
        class="hidden text-center py-16 text-cb-400 dark:text-cb-500 font-medium text-base"
      ></div>

      <!-- Main content -->
      <div id="stats-content" class="hidden flex flex-col gap-6">
        <!-- Summary cards row -->
        <div class="grid grid-cols-2 sm:grid-cols-5 gap-3">
          <div class="stat-card col-span-2 sm:col-span-1">
            <p
              id="stat-total-label"
              class="text-xs text-cb-500 font-semibold tracking-wider uppercase"
            >
              Total
            </p>
            <p id="stat-total-val" class="text-3xl font-extrabold text-cb-600">
              0
            </p>
          </div>
          <div class="stat-card">
            <p
              id="stat-pending-label"
              class="text-xs text-amber-600 font-semibold tracking-wider uppercase"
            >
              Pending
            </p>
            <p
              id="stat-pending-val"
              class="text-3xl font-extrabold text-amber-600"
            >
              0
            </p>
          </div>
          <div class="stat-card">
            <p
              id="stat-interview-label"
              class="text-xs text-purple-600 font-semibold tracking-wider uppercase"
            >
              Interview
            </p>
            <p
              id="stat-interview-val"
              class="text-3xl font-extrabold text-purple-600"
            >
              0
            </p>
          </div>
          <div class="stat-card">
            <p
              id="stat-accepted-label"
              class="text-xs text-emerald-600 font-semibold tracking-wider uppercase"
            >
              Accepted
            </p>
            <p
              id="stat-accepted-val"
              class="text-3xl font-extrabold text-emerald-600"
            >
              0
            </p>
          </div>
          <div class="stat-card">
            <p
              id="stat-rejected-label"
              class="text-xs text-red-600 font-semibold tracking-wider uppercase"
            >
              Rejected
            </p>
            <p
              id="stat-rejected-val"
              class="text-3xl font-extrabold text-red-600"
            >
              0
            </p>
          </div>
        </div>

        <!-- Charts row -->
        <div class="grid grid-cols-1 lg:grid-cols-5 gap-6">
          <!-- Donut chart card -->
          <div
            class="lg:col-span-2 bg-white dark:bg-cb-900 rounded-2xl shadow-sm border border-cb-100 dark:border-cb-800 p-5 sm:p-6 flex flex-col"
          >
            <h2
              id="stats-status-title"
              class="font-semibold text-lg text-cb-800 dark:text-cb-100 mb-5"
            >
              Application Status Distribution
            </h2>
            <div class="relative mx-auto w-full max-w-[220px] h-[220px] mb-6">
              <canvas id="donut-chart"></canvas>
            </div>
            <div id="donut-legend" class="flex flex-col gap-2.5 mt-auto"></div>
          </div>

          <!-- Bar chart card -->
          <div
            class="lg:col-span-3 bg-white dark:bg-cb-900 rounded-2xl shadow-sm border border-cb-100 dark:border-cb-800 p-5 sm:p-6 flex flex-col"
          >
            <h2
              id="stats-monthly-title"
              class="font-semibold text-lg text-cb-800 dark:text-cb-100 mb-5"
            >
              Applications by Month
            </h2>
            <div class="flex-1 min-h-[260px] sm:min-h-[300px]">
              <canvas id="bar-chart"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/translations.js"></script>
    <script src="js/util.js"></script>
    <script src="js/statistics.js"></script>
  </body>
</html>
